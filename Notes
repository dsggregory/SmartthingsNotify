time="2018-12-15T16:14:16Z" level=info Method=GET RemoteAddr="54.83.153.25:38968" URL=/gs state=begin
time="2018-12-15T16:14:16Z" level=info Method=GET RemoteAddr="54.83.153.25:38968" Status=200 URL=/gs duration="34.672Âµs" state=complete
time="2018-12-15T16:14:26Z" level=info Method=POST RemoteAddr="54.83.150.101:45233" URL=/gs state=begin
time="2018-12-15T16:14:26Z" level=error msg="cannot add event" error="json: cannot unmarshal object into Go struct field postRequestData.ArchiveOptions of type string"
time="2018-12-15T16:14:26Z" level=info msg="calling gs postback" pbdata="{false false false Version 01.03.00 1544890466960 0 0 unlimited service error}" postback-url="https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status"
time="2018-12-15T16:14:27Z" level=debug msg="gs postback success" response=
time="2018-12-15T16:14:27Z" level=info Method=POST RemoteAddr="54.83.150.101:45233" Status=500 URL=/gs duration=262.230028ms state=complete

Peers
======
54.83.150.101
54.83.153.25
54.83.153.160

log debug json body

{"postBackUrl":"https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status","archiveOptions":{"logIsFull":false,"type":"None","interval":50000},"logDesc":true,"logReporting":false,"deleteExtraColumns":true,"events":[{"time":"12/15/2018 10:45:29","device":"Front Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:45:54","device":"Front Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 10:50:02","device":"Front Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:50:04","device":"Front Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 10:50:05","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 10:50:09","device":"Front Door Light","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 10:50:12","device":"Front Door Light","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 10:50:28","device":"zAlarmP Upper Doors","name":"contact","value":"open","desc":"open"},{"time":"12/15/2018 10:50:32","device":"zAlarmP Upper Doors","name":"contact","value":"closed","desc":"closed"},{"time":"12/15/2018 10:50:53","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 10:59:10","device":"Back Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:59:20","device":"Back Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 11:04:23","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:04:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:05:03","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:05:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:08:13","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:11:54","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:12:04","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:12:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:12:34","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:12:44","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:16:04","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:16:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:16:24","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:17:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:20:53","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:21:03","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:21:23","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:23:04","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:23:43","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:24:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:24:53","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:30:03","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"}]}

---

time="2018-12-15T17:40:53Z" level=debug msg="can't parse body" body="{\"postBackUrl\":\"https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status\",\"archiveOptions\":{\"logIsFull\":false,\"type\":\"None\",\"interval\":50000},\"logDesc\":true,\"logReporting\":false,\"deleteExtraColumns\":true,\"events\":[{\"time\":\"12/15/2018 10:45:29\",\"device\":\"Front Door\",\"name\":\"lock\",\"value\":\"unlocked\",\"desc\":\"unlocked\"},{\"time\":\"12/15/2018 10:45:54\",\"device\":\"Front Door\",\"name\":\"lock\",\"value\":\"locked\",\"desc\":\"locked\"},{\"time\":\"12/15/2018 10:50:02\",\"device\":\"Front Door\",\"name\":\"lock\",\"value\":\"unlocked\",\"desc\":\"unlocked\"},{\"time\":\"12/15/2018 10:50:04\",\"device\":\"Front Door\",\"name\":\"lock\",\"value\":\"locked\",\"desc\":\"locked\"},{\"time\":\"12/15/2018 10:50:05\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 10:50:09\",\"device\":\"Front Door Light\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 10:50:12\",\"device\":\"Front Door Light\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 10:50:28\",\"device\":\"zAlarmP Upper Doors\",\"name\":\"contact\",\"value\":\"open\",\"desc\":\"open\"},{\"time\":\"12/15/2018 10:50:32\",\"device\":\"zAlarmP Upper Doors\",\"name\":\"contact\",\"value\":\"closed\",\"desc\":\"closed\"},{\"time\":\"12/15/2018 10:50:53\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 10:59:10\",\"device\":\"Back Door\",\"name\":\"lock\",\"value\":\"unlocked\",\"desc\":\"unlocked\"},{\"time\":\"12/15/2018 10:59:20\",\"device\":\"Back Door\",\"name\":\"lock\",\"value\":\"locked\",\"desc\":\"locked\"},{\"time\":\"12/15/2018 11:04:23\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:04:33\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:05:03\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:05:33\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:08:13\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:11:54\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:12:04\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:12:14\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:12:34\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:12:44\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:16:04\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:16:14\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:16:24\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:17:14\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:20:53\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:21:03\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:21:23\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:23:04\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:23:43\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:24:33\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"},{\"time\":\"12/15/2018 11:24:53\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"off\",\"desc\":\"off\"},{\"time\":\"12/15/2018 11:30:03\",\"device\":\"Front Stoop Lights\",\"name\":\"switch\",\"value\":\"on\",\"desc\":\"on\"}]}"
time="2018-12-15T17:40:53Z" level=error msg="cannot add event"
    error="json: cannot unmarshal bool into Go struct field postRequestData.LogDesc of type string"
time="2018-12-15T17:40:53Z" level=info msg="calling gs postback"
    pbdata="{false false false Version 01.03.00 1544895653498 0 0 unlimited service error}"
    postback-url="https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status"

{"postBackUrl":"https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status","archiveOptions":{"logIsFull":false,"type":"None","interval":50000},"logDesc":true,"logReporting":false,"deleteExtraColumns":true,"events":[{"time":"12/15/2018 10:45:29","device":"Front Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:45:54","device":"Front Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 10:50:02","device":"Front Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:50:04","device":"Front Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 10:50:05","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 10:50:09","device":"Front Door Light","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 10:50:12","device":"Front Door Light","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 10:50:28","device":"zAlarmP Upper Doors","name":"contact","value":"open","desc":"open"},{"time":"12/15/2018 10:50:32","device":"zAlarmP Upper Doors","name":"contact","value":"closed","desc":"closed"},{"time":"12/15/2018 10:50:53","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 10:59:10","device":"Back Door","name":"lock","value":"unlocked","desc":"unlocked"},{"time":"12/15/2018 10:59:20","device":"Back Door","name":"lock","value":"locked","desc":"locked"},{"time":"12/15/2018 11:04:23","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:04:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:05:03","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:05:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:08:13","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:11:54","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:12:04","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:12:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:12:34","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:12:44","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:16:04","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:16:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:16:24","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:17:14","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:20:53","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:21:03","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:21:23","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:23:04","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:23:43","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:24:33","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"},{"time":"12/15/2018 11:24:53","device":"Front Stoop Lights","name":"switch","value":"off","desc":"off"},{"time":"12/15/2018 11:30:03","device":"Front Stoop Lights","name":"switch","value":"on","desc":"on"}]}

----

SmartApp logs
41eb83c7-b992-4695-a710-f204edd4e135  12:57:04 PM: warn Unexpected response from Google Sheets Web App: Failed to complete. Message was: originalUrl
41eb83c7-b992-4695-a710-f204edd4e135  12:57:04 PM: trace Google Script Version: null, Total Events Logged: 0, Remaining Space Available: null
41eb83c7-b992-4695-a710-f204edd4e135  12:57:04 PM: warn Google Sheets Web App failed to log events between 12/15/2018 10:44:06 and 12/15/2018 11:44:07.
41eb83c7-b992-4695-a710-f204edd4e135  12:57:03 PM: debug SmartThings found 34 events between 12/15/2018 10:44:07 and 12/15/2018 11:44:07, posting them to Google Sheets Web App
41eb83c7-b992-4695-a710-f204edd4e135  12:57:03 PM: trace Retrieving Events from Sat Dec 15 15:44:07 UTC 2018 to Sat Dec 15 16:44:07 UTC 2018
41eb83c7-b992-4695-a710-f204edd4e135  12:56:53 PM: trace The Google Sheets Web App is using the correct version of the Google Script code.

WebApp logs
time="2018-12-15T17:58:45Z" level=info msg="calling gs postback" pbdata="{true false false Version 01.03.00 1544896725760 34 34 unlimited }" postback-url="https://graph.api.smartthings.com:443/api/token/a072e408-e085-4566-9cdb-00f61ede02a2/smartapps/installations/41eb83c7-b992-4695-a710-f204edd4e135/update-logging-status"
time="2018-12-15T17:58:45Z" level=debug msg="gs postback success" post="{\"Success\":true,\"EventsArchived\":false,\"LogIsFull\":false,\"GsVersion\":\"Version 01.03.00\",\"Finished\":1544896725760,\"EventsLogged\":34,\"TotalEventsLogged\":34,\"FreeSpace\":\"unlimited\",\"error\":\"\"}" response=
time="2018-12-15T17:58:45Z" level=info Method=POST RemoteAddr="54.83.153.160:57994" Status=302 URL=/gs duration=234.869748ms state=complete

-------

GET /login?apiKey=xxx - apiKey==conf.apiKey? don't check allowed host
mac it and set login cookie
redirect to /
in future, auth is allowed host or has login cookie